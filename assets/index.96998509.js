var L=Object.defineProperty,O=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var k=(r,o,e)=>o in r?L(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,v=(r,o)=>{for(var e in o||(o={}))H.call(o,e)&&k(r,e,o[e]);if(V)for(var e of V(o))J.call(o,e)&&k(r,e,o[e]);return r},j=(r,o)=>O(r,S(o));import{m as P,C as p,q as z,r as d,P as G,J as w,u as a,o as f,h as F,a as l,w as i,F as K,i as M,y as N,c as Q}from"./vendor.444fda8e.js";import{f as W}from"./useForInData.6b9358e5.js";import{u as X}from"./useAddOrEditSubmit.bb4d8ff4.js";import{a as Y,e as Z,i as $}from"./index.f7fa61cd.js";import{l as ee}from"./type.da008d1e.js";import"./useFormValid.218cf5b6.js";import"./index.749f83c7.js";const te=N("\u53D6\u6D88"),oe=N("\u786E\u8BA4\u63D0\u4EA4"),me={setup(r){const o=P(),e=p({loading:!1,pageTitle:{add:"\u65B0\u589E\u901A\u77E5\u516C\u544A",edit:"\u4FEE\u6539\u901A\u77E5\u516C\u544A"},type:"add",id:null}),_=z(),g=X(_,"Notice"),s=p({title:"",type_id:null,text:""}),A=()=>{e.loading=!0,$({id:e.id}).then(c=>{console.log(c),W(c.data,s)}).finally(()=>e.loading=!1)},u=p({loading:!1,list:[]}),y=async c=>{if(!(!c||u.list.length)){u.loading=!0;try{const n=await ee();console.log(n),u.list=n.data.list}finally{u.loading=!1}}},B=async()=>{try{e.type==="add"?g(Y,s,e):g(Z,j(v({},s),{id:e.id}),e,"\u4FEE\u6539")}catch(c){console.log(c)}};return(()=>{const{params:c,name:n}=o;if(y(!0),n==="NoticeAdd")return e.type="add";e.type="edit",e.id=c.id,A()})(),(c,n)=>{const D=d("page-header"),b=d("router-link"),x=d("el-input"),m=d("el-form-item"),q=d("el-option"),T=d("el-select"),E=d("el-form"),h=d("el-button"),I=d("FixedActionBar"),R=d("page-main"),C=G("loading");return w((f(),F("div",null,[l(b,{custom:"",to:{name:"Notice"}},{default:i(({navigate:t})=>[l(D,{title:a(e).pageTitle[a(e).type],onClick:t},null,8,["title","onClick"])]),_:1}),l(R,{style:{margin:"20px"}},{default:i(()=>[w(l(E,{ref:(t,U)=>{U.formRef=t,_.value=t},model:a(s),style:{margin:"0 auto",width:"60%"},"label-width":"80px"},{default:i(()=>[l(m,{label:"\u516C\u544A\u6807\u9898",prop:"title",rules:{required:!0,message:"\u516C\u544A\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:i(()=>[l(x,{modelValue:a(s).title,"onUpdate:modelValue":n[0]||(n[0]=t=>a(s).title=t),clearable:"",placeholder:"\u8BF7\u8F93\u516C\u544A\u6807\u9898"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u516C\u544A\u7C7B\u578B",prop:"type_id",rules:{required:!0,message:"\u516C\u544A\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}},{default:i(()=>[l(T,{modelValue:a(s).type_id,"onUpdate:modelValue":n[1]||(n[1]=t=>a(s).type_id=t),loading:a(u).loading,placeholder:"\u8BF7\u9009\u62E9\u516C\u544A\u7C7B\u578B",onVisibleChange:y},{default:i(()=>[(f(!0),F(K,null,M(a(u).list,t=>(f(),Q(q,{key:t.id,label:t.title,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),l(m,{label:"\u516C\u544A\u5185\u5BB9",prop:"text",rules:{required:!0,message:"\u516C\u544A\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:i(()=>[l(x,{modelValue:a(s).text,"onUpdate:modelValue":n[2]||(n[2]=t=>a(s).text=t),clearable:"",type:"textarea",rows:3,placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),[[C,a(e).infoLoading]]),l(I,{style:{"text-align":"center"}},{default:i(()=>[l(b,{custom:"",to:{name:"Notice"}},{default:i(({navigate:t})=>[l(h,{onClick:t},{default:i(()=>[te]),_:2},1032,["onClick"])]),_:1}),l(h,{type:"primary",onClick:B},{default:i(()=>[oe]),_:1})]),_:1})]),_:1})],512)),[[C,a(e).loading]])}}};export{me as default};
