var T=Object.defineProperty;var h=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var y=(c,o,a)=>o in c?T(c,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[o]=a,x=(c,o)=>{for(var a in o||(o={}))M.call(o,a)&&y(c,a,o[a]);if(h)for(var a of h(o))K.call(o,a)&&y(c,a,o[a]);return c};import{s as L,d as Q,l as j}from"./list.7c9764db.js";import{s as q}from"./useSearch.3b9cc75a.js";import{g as A,D as k,aT as F,r as i,Q as G,o as w,i as H,a as e,w as r,u as l,ax as I,K as J,c as W,B as X,R as Y,V as Z}from"./vendor.a8f4b3ca.js";import"./index.de995f9b.js";import"./useForInData.6b9358e5.js";const ee=X(" \u65B0 \u589E "),ie={setup(c){const o=A(),a=k({keywords:null,status:null}),n=F({pageSize:10,total:0,currentPage:1,loading:!0,list:[]}),g=k({mode:"router",id:"",visible:!1});function C(){if(g.mode==="router")return o.push({name:"departmentCreate"});g.id="",g.visible=!0}const{onSearchChange:v,onResetChange:P}=q(n.currentPage,m,a);async function S(d,s){try{await Y.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417\uFF1F","\u63D0\u793A",{type:"warning"}),d.disabled=!0;const u=await Q({id:d.id});n.list.splice(s,1),n.total-=1,Z({title:"\u63D0\u793A",message:u.message,type:"success"})}finally{d.disabled=!1}}function m(){n.loading=!0,j(x({currentPage:n.currentPage},a)).then(d=>{const{total:s,current_page:u,list:_}=d.data;n.total=s,n.currentPage=u,n.list=_}).finally(()=>n.loading=!1)}return m(),(d,s)=>{const u=i("el-option"),_=i("el-select"),z=i("search-bar"),f=i("el-button"),O=i("refresh-button"),D=i("el-row"),p=i("el-table-column"),R=i("confirm-switch"),V=i("el-table"),B=i("pagination"),$=i("fixed-action-bar"),E=i("page-main"),U=G("loading");return w(),H("div",null,[e(z,{keywords:l(a).keywords,"onUpdate:keywords":s[1]||(s[1]=t=>l(a).keywords=t),"keywords-text":"\u641C\u7D22\u5458\u5DE5\u59D3\u540D",onOnSearch:l(v),onOnReset:l(P)},{default:r(()=>[e(_,{modelValue:l(a).status,"onUpdate:modelValue":s[0]||(s[0]=t=>l(a).status=t),clearable:"",placeholder:"\u7B5B\u9009 \u7981\u7528/\u542F\u7528"},{default:r(()=>[e(u,{label:"\u7981\u7528",value:0}),e(u,{label:"\u542F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1},8,["keywords","onOnSearch","onOnReset"]),e(E,{title:"\u8868\u683C",style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{extra:r(()=>[e(D,{align:"middle"},{default:r(()=>[e(f,{size:"small",icon:l(I),type:"primary",onClick:C,style:{"margin-right":"16px"}},{default:r(()=>[ee]),_:1},8,["icon"]),e(O,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:m})]),_:1})]),default:r(()=>[J((w(),W(V,{data:l(n).list},{default:r(()=>[e(p,{type:"index",width:"50"}),e(p,{prop:"name",label:"\u59D3\u540D","min-width":"160",align:"center"}),e(p,{prop:"address",label:"\u7981\u7528/\u542F\u7528","min-width":"160",align:"center"},{default:r(({row:t})=>[e(R,{id:t.id,api:l(L),text:`\u786E\u5B9A\u8981\u300C${t.status?"\u7981\u7528":"\u542F\u7528"}\u300D\u8BE5\u6570\u636E\u5417\uFF1F`,status:t.status,onOnSuccess:b=>t.status=!t.status},null,8,["id","api","text","status","onOnSuccess"])]),_:1}),e(p,{prop:"address",label:"\u5730\u5740","min-width":"260"}),e(p,{prop:"date",label:"\u65E5\u671F","min-width":"180",align:"center"}),e(p,{prop:"address",label:"\u64CD\u4F5C",align:"center","min-width":"140",fixed:"right"},{default:r(({row:t,$index:b})=>[e(f,{disabled:t.disabled,type:"warning",size:"small",icon:"el-icon-edit",circle:"",onClick:N=>d.$router.push({name:"TableEdit",params:{id:t.id}})},null,8,["disabled","onClick"]),e(f,{loading:t.disabled,type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:N=>S(t,b)},null,8,["loading","onClick"])]),_:1})]),_:1},8,["data"])),[[U,l(n).loading]]),e($,null,{default:r(()=>[e(B,{pageSize:l(n).pageSize,"onUpdate:pageSize":s[2]||(s[2]=t=>l(n).pageSize=t),currentPage:l(n).currentPage,"onUpdate:currentPage":s[3]||(s[3]=t=>l(n).currentPage=t),total:l(n).total,onOnChange:m},null,8,["pageSize","currentPage","total"])]),_:1})]),_:1})])}}};export{ie as default};
