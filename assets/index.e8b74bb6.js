var j=Object.defineProperty;var h=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var y=(r,a,e)=>a in r?j(r,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[a]=e,k=(r,a)=>{for(var e in a||(a={}))B.call(a,e)&&y(r,e,a[e]);if(h)for(var e of h(a))E.call(a,e)&&y(r,e,a[e]);return r};import{s as U,d as I,l as N}from"./list.d3577118.js";import{f as T}from"./useForInData.6b9358e5.js";import{B as A,av as F,r as o,O as L,o as M,h as q,a as t,w as i,u as l,I as G,y as H,P as J,R as K}from"./vendor.ac8c9492.js";import"./index.d934d21b.js";function Q(r,a,e){function p(){a()}function m(){T({},e),p()}return{onSearchChange:p,onResetChange:m}}const W=H(" \u65B0 \u589E "),ne={setup(r){const a=A({keywords:null,status:null}),e=F({pageSize:10,total:0,currentPage:1,loading:!0,list:[]}),{onSearchChange:p,onResetChange:m}=Q(e.currentPage,g,a);async function x(c,s){try{await J.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417\uFF1F","\u63D0\u793A",{type:"warning"}),c.disabled=!0;const d=await I({id:c.id});e.list.splice(s,1),e.total-=1,K({title:"\u63D0\u793A",message:d.message,type:"success"})}finally{c.disabled=!1}}function g(){e.loading=!0,N(k({currentPage:e.currentPage},a)).then(c=>{const{total:s,current_page:d,list:_}=c.data;e.total=s,e.currentPage=d,e.list=_}).finally(()=>e.loading=!1)}return g(),(c,s)=>{const d=o("el-option"),_=o("el-select"),w=o("search-bar"),f=o("el-button"),C=o("router-link"),v=o("refresh-button"),P=o("el-row"),u=o("el-table-column"),S=o("confirm-switch"),z=o("el-table"),O=o("pagination"),D=o("fixed-action-bar"),R=o("page-main"),V=L("loading");return M(),q("div",null,[t(w,{keywords:l(a).keywords,"onUpdate:keywords":s[1]||(s[1]=n=>l(a).keywords=n),"keywords-text":"\u641C\u7D22\u5458\u5DE5\u59D3\u540D",onOnSearch:l(p),onOnReset:l(m)},{default:i(()=>[t(_,{modelValue:l(a).status,"onUpdate:modelValue":s[0]||(s[0]=n=>l(a).status=n),clearable:"",placeholder:"\u7B5B\u9009 \u7981\u7528/\u542F\u7528"},{default:i(()=>[t(d,{label:"\u7981\u7528",value:0}),t(d,{label:"\u542F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1},8,["keywords","onOnSearch","onOnReset"]),t(R,{title:"\u8868\u683C",style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{extra:i(()=>[t(P,{align:"middle"},{default:i(()=>[t(C,{custom:"",to:{name:"TableAdd"}},{default:i(({navigate:n})=>[t(f,{size:"small",icon:"el-icon-plus",type:"primary",onClick:n,style:{"margin-right":"16px"}},{default:i(()=>[W]),_:2},1032,["onClick"])]),_:1}),t(v,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:g})]),_:1})]),default:i(()=>[G(t(z,{data:l(e).list},{default:i(()=>[t(u,{type:"index",width:"50"}),t(u,{prop:"name",label:"\u59D3\u540D","min-width":"160",align:"center"}),t(u,{prop:"address",label:"\u7981\u7528/\u542F\u7528","min-width":"160",align:"center"},{default:i(({row:n})=>[t(S,{id:n.id,api:l(U),text:`\u786E\u5B9A\u8981\u300C${n.status?"\u7981\u7528":"\u542F\u7528"}\u300D\u8BE5\u6570\u636E\u5417\uFF1F`,status:n.status,onOnSuccess:b=>n.status=!n.status},null,8,["id","api","text","status","onOnSuccess"])]),_:1}),t(u,{prop:"address",label:"\u5730\u5740","min-width":"260"}),t(u,{prop:"date",label:"\u65E5\u671F","min-width":"180",align:"center"}),t(u,{prop:"address",label:"\u64CD\u4F5C",align:"center","min-width":"140",fixed:"right"},{default:i(({row:n,$index:b})=>[t(f,{disabled:n.disabled,type:"warning",size:"small",icon:"el-icon-edit",circle:"",onClick:$=>c.$router.push({name:"TableEdit",params:{id:n.id}})},null,8,["disabled","onClick"]),t(f,{loading:n.disabled,type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:$=>x(n,b)},null,8,["loading","onClick"])]),_:1})]),_:1},8,["data"]),[[V,l(e).loading]]),t(D,null,{default:i(()=>[t(O,{pageSize:l(e).pageSize,"onUpdate:pageSize":s[2]||(s[2]=n=>l(e).pageSize=n),currentPage:l(e).currentPage,"onUpdate:currentPage":s[3]||(s[3]=n=>l(e).currentPage=n),total:l(e).total,onOnChange:g},null,8,["pageSize","currentPage","total"])]),_:1})]),_:1})])}}};export{ne as default};
