var $=Object.defineProperty;var b=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(r,n,e)=>n in r?$(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,h=(r,n)=>{for(var e in n||(n={}))E.call(n,e)&&f(r,e,n[e]);if(b)for(var e of b(n))R.call(n,e)&&f(r,e,n[e]);return r};import{s as B,d as N,l as T}from"./list.f3253475.js";import{s as A}from"./useSearch.3b9cc75a.js";import{C as F,aP as I,r as o,P as J,o as L,h as M,a as t,w as i,u as l,J as Q,y as q,Q as G,U as H}from"./vendor.924d7bb5.js";import"./index.edb99dcc.js";import"./useForInData.6b9358e5.js";const K=q(" \u65B0 \u589E "),ae={setup(r){const n=F({keywords:null,status:null}),e=I({pageSize:10,total:0,currentPage:1,loading:!0,list:[]}),{onSearchChange:y,onResetChange:k}=A(e.currentPage,p,n);async function x(c,s){try{await G.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417\uFF1F","\u63D0\u793A",{type:"warning"}),c.disabled=!0;const d=await N({id:c.id});e.list.splice(s,1),e.total-=1,H({title:"\u63D0\u793A",message:d.message,type:"success"})}finally{c.disabled=!1}}function p(){e.loading=!0,T(h({currentPage:e.currentPage},n)).then(c=>{const{total:s,current_page:d,list:m}=c.data;e.total=s,e.currentPage=d,e.list=m}).finally(()=>e.loading=!1)}return p(),(c,s)=>{const d=o("el-option"),m=o("el-select"),w=o("search-bar"),_=o("el-button"),C=o("router-link"),v=o("refresh-button"),P=o("el-row"),u=o("el-table-column"),S=o("confirm-switch"),z=o("el-table"),O=o("pagination"),j=o("fixed-action-bar"),D=o("page-main"),U=J("loading");return L(),M("div",null,[t(w,{keywords:l(n).keywords,"onUpdate:keywords":s[1]||(s[1]=a=>l(n).keywords=a),"keywords-text":"\u641C\u7D22\u5458\u5DE5\u59D3\u540D",onOnSearch:l(y),onOnReset:l(k)},{default:i(()=>[t(m,{modelValue:l(n).status,"onUpdate:modelValue":s[0]||(s[0]=a=>l(n).status=a),clearable:"",placeholder:"\u7B5B\u9009 \u7981\u7528/\u542F\u7528"},{default:i(()=>[t(d,{label:"\u7981\u7528",value:0}),t(d,{label:"\u542F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1},8,["keywords","onOnSearch","onOnReset"]),t(D,{title:"\u8868\u683C",style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{extra:i(()=>[t(P,{align:"middle"},{default:i(()=>[t(C,{custom:"",to:{name:"TableAdd"}},{default:i(({navigate:a})=>[t(_,{size:"small",icon:"el-icon-plus",type:"primary",onClick:a,style:{"margin-right":"16px"}},{default:i(()=>[K]),_:2},1032,["onClick"])]),_:1}),t(v,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:p})]),_:1})]),default:i(()=>[Q(t(z,{data:l(e).list},{default:i(()=>[t(u,{type:"index",width:"50"}),t(u,{prop:"name",label:"\u59D3\u540D","min-width":"160",align:"center"}),t(u,{prop:"address",label:"\u7981\u7528/\u542F\u7528","min-width":"160",align:"center"},{default:i(({row:a})=>[t(S,{id:a.id,api:l(B),text:`\u786E\u5B9A\u8981\u300C${a.status?"\u7981\u7528":"\u542F\u7528"}\u300D\u8BE5\u6570\u636E\u5417\uFF1F`,status:a.status,onOnSuccess:g=>a.status=!a.status},null,8,["id","api","text","status","onOnSuccess"])]),_:1}),t(u,{prop:"address",label:"\u5730\u5740","min-width":"260"}),t(u,{prop:"date",label:"\u65E5\u671F","min-width":"180",align:"center"}),t(u,{prop:"address",label:"\u64CD\u4F5C",align:"center","min-width":"140",fixed:"right"},{default:i(({row:a,$index:g})=>[t(_,{disabled:a.disabled,type:"warning",size:"small",icon:"el-icon-edit",circle:"",onClick:V=>c.$router.push({name:"TableEdit",params:{id:a.id}})},null,8,["disabled","onClick"]),t(_,{loading:a.disabled,type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:V=>x(a,g)},null,8,["loading","onClick"])]),_:1})]),_:1},8,["data"]),[[U,l(e).loading]]),t(j,null,{default:i(()=>[t(O,{pageSize:l(e).pageSize,"onUpdate:pageSize":s[2]||(s[2]=a=>l(e).pageSize=a),currentPage:l(e).currentPage,"onUpdate:currentPage":s[3]||(s[3]=a=>l(e).currentPage=a),total:l(e).total,onOnChange:p},null,8,["pageSize","currentPage","total"])]),_:1})]),_:1})])}}};export{ae as default};
