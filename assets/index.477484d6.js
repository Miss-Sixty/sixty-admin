var B=Object.defineProperty;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var y=(c,s,a)=>s in c?B(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a,x=(c,s)=>{for(var a in s||(s={}))N.call(s,a)&&y(c,a,s[a]);if(h)for(var a of h(s))M.call(s,a)&&y(c,a,s[a]);return c};import{s as T,d as F,l as I}from"./list.2e0346cb.js";import{s as J}from"./useSearch.3b9cc75a.js";import{f as K,C,aK as L,r as i,P as Q,o as q,h as A,a as e,w as r,u as o,az as G,J as H,y as W,Q as X,U as Y}from"./vendor.f6a7b20b.js";import"./index.257b4271.js";import"./useForInData.6b9358e5.js";const Z=W(" \u65B0 \u589E "),le={setup(c){const s=K(),a=C({keywords:null,status:null}),n=L({pageSize:10,total:0,currentPage:1,loading:!0,list:[]}),g=C({mode:"router",id:"",visible:!1});function v(){if(g.mode==="router")return s.push({name:"departmentCreate"});g.id="",g.visible=!0}const{onSearchChange:w,onResetChange:k}=J(n.currentPage,m,a);async function P(d,l){try{await X.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417\uFF1F","\u63D0\u793A",{type:"warning"}),d.disabled=!0;const u=await F({id:d.id});n.list.splice(l,1),n.total-=1,Y({title:"\u63D0\u793A",message:u.message,type:"success"})}finally{d.disabled=!1}}function m(){n.loading=!0,I(x({currentPage:n.currentPage},a)).then(d=>{const{total:l,current_page:u,list:_}=d.data;n.total=l,n.currentPage=u,n.list=_}).finally(()=>n.loading=!1)}return m(),(d,l)=>{const u=i("el-option"),_=i("el-select"),S=i("search-bar"),b=i("el-button"),z=i("refresh-button"),O=i("el-row"),p=i("el-table-column"),D=i("confirm-switch"),j=i("el-table"),R=i("pagination"),U=i("fixed-action-bar"),V=i("page-main"),$=Q("loading");return q(),A("div",null,[e(S,{keywords:o(a).keywords,"onUpdate:keywords":l[1]||(l[1]=t=>o(a).keywords=t),"keywords-text":"\u641C\u7D22\u5458\u5DE5\u59D3\u540D",onOnSearch:o(w),onOnReset:o(k)},{default:r(()=>[e(_,{modelValue:o(a).status,"onUpdate:modelValue":l[0]||(l[0]=t=>o(a).status=t),clearable:"",placeholder:"\u7B5B\u9009 \u7981\u7528/\u542F\u7528"},{default:r(()=>[e(u,{label:"\u7981\u7528",value:0}),e(u,{label:"\u542F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1},8,["keywords","onOnSearch","onOnReset"]),e(V,{title:"\u8868\u683C",style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{extra:r(()=>[e(O,{align:"middle"},{default:r(()=>[e(b,{size:"small",icon:o(G),type:"primary",onClick:v,style:{"margin-right":"16px"}},{default:r(()=>[Z]),_:1},8,["icon"]),e(z,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:m})]),_:1})]),default:r(()=>[H(e(j,{data:o(n).list},{default:r(()=>[e(p,{type:"index",width:"50"}),e(p,{prop:"name",label:"\u59D3\u540D","min-width":"160",align:"center"}),e(p,{prop:"address",label:"\u7981\u7528/\u542F\u7528","min-width":"160",align:"center"},{default:r(({row:t})=>[e(D,{id:t.id,api:o(T),text:`\u786E\u5B9A\u8981\u300C${t.status?"\u7981\u7528":"\u542F\u7528"}\u300D\u8BE5\u6570\u636E\u5417\uFF1F`,status:t.status,onOnSuccess:f=>t.status=!t.status},null,8,["id","api","text","status","onOnSuccess"])]),_:1}),e(p,{prop:"address",label:"\u5730\u5740","min-width":"260"}),e(p,{prop:"date",label:"\u65E5\u671F","min-width":"180",align:"center"}),e(p,{prop:"address",label:"\u64CD\u4F5C",align:"center","min-width":"140",fixed:"right"},{default:r(({row:t,$index:f})=>[e(b,{disabled:t.disabled,type:"warning",size:"small",icon:"el-icon-edit",circle:"",onClick:E=>d.$router.push({name:"TableEdit",params:{id:t.id}})},null,8,["disabled","onClick"]),e(b,{loading:t.disabled,type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:E=>P(t,f)},null,8,["loading","onClick"])]),_:1})]),_:1},8,["data"]),[[$,o(n).loading]]),e(U,null,{default:r(()=>[e(R,{pageSize:o(n).pageSize,"onUpdate:pageSize":l[2]||(l[2]=t=>o(n).pageSize=t),currentPage:o(n).currentPage,"onUpdate:currentPage":l[3]||(l[3]=t=>o(n).currentPage=t),total:o(n).total,onOnChange:m},null,8,["pageSize","currentPage","total"])]),_:1})]),_:1})])}}};export{le as default};
