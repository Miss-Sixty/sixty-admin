var U=Object.defineProperty;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var y=(d,s,a)=>s in d?U(d,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):d[s]=a,x=(d,s)=>{for(var a in s||(s={}))N.call(s,a)&&y(d,a,s[a]);if(h)for(var a of h(s))M.call(s,a)&&y(d,a,s[a]);return d};import{s as Q,d as T,l as F}from"./list.3856df2b.js";import{s as I}from"./useSearch.3b9cc75a.js";import{g as K,D as C,aQ as L,r as i,Q as q,o as A,i as G,a as e,w as r,u as o,aC as H,K as J,B as W,R as X,V as Y}from"./vendor.1e4d5cc4.js";import"./index.58d2bb44.js";import"./useForInData.6b9358e5.js";const Z=W(" \u65B0 \u589E "),le={setup(d){const s=K(),a=C({keywords:null,status:null}),n=L({pageSize:10,total:0,currentPage:1,loading:!0,list:[]}),g=C({mode:"router",id:"",visible:!1});function v(){if(g.mode==="router")return s.push({name:"departmentCreate"});g.id="",g.visible=!0}const{onSearchChange:w,onResetChange:k}=I(n.currentPage,m,a);async function S(c,l){try{await X.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417\uFF1F","\u63D0\u793A",{type:"warning"}),c.disabled=!0;const u=await T({id:c.id});n.list.splice(l,1),n.total-=1,Y({title:"\u63D0\u793A",message:u.message,type:"success"})}finally{c.disabled=!1}}function m(){n.loading=!0,F(x({currentPage:n.currentPage},a)).then(c=>{const{total:l,current_page:u,list:_}=c.data;n.total=l,n.currentPage=u,n.list=_}).finally(()=>n.loading=!1)}return m(),(c,l)=>{const u=i("el-option"),_=i("el-select"),P=i("search-bar"),b=i("el-button"),z=i("refresh-button"),D=i("el-row"),p=i("el-table-column"),O=i("confirm-switch"),R=i("el-table"),V=i("pagination"),j=i("fixed-action-bar"),$=i("page-main"),B=q("loading");return A(),G("div",null,[e(P,{keywords:o(a).keywords,"onUpdate:keywords":l[1]||(l[1]=t=>o(a).keywords=t),"keywords-text":"\u641C\u7D22\u5458\u5DE5\u59D3\u540D",onOnSearch:o(w),onOnReset:o(k)},{default:r(()=>[e(_,{modelValue:o(a).status,"onUpdate:modelValue":l[0]||(l[0]=t=>o(a).status=t),clearable:"",placeholder:"\u7B5B\u9009 \u7981\u7528/\u542F\u7528"},{default:r(()=>[e(u,{label:"\u7981\u7528",value:0}),e(u,{label:"\u542F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1},8,["keywords","onOnSearch","onOnReset"]),e($,{title:"\u8868\u683C",style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{extra:r(()=>[e(D,{align:"middle"},{default:r(()=>[e(b,{size:"small",icon:o(H),type:"primary",onClick:v,style:{"margin-right":"16px"}},{default:r(()=>[Z]),_:1},8,["icon"]),e(z,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:m})]),_:1})]),default:r(()=>[J(e(R,{data:o(n).list},{default:r(()=>[e(p,{type:"index",width:"50"}),e(p,{prop:"name",label:"\u59D3\u540D","min-width":"160",align:"center"}),e(p,{prop:"address",label:"\u7981\u7528/\u542F\u7528","min-width":"160",align:"center"},{default:r(({row:t})=>[e(O,{id:t.id,api:o(Q),text:`\u786E\u5B9A\u8981\u300C${t.status?"\u7981\u7528":"\u542F\u7528"}\u300D\u8BE5\u6570\u636E\u5417\uFF1F`,status:t.status,onOnSuccess:f=>t.status=!t.status},null,8,["id","api","text","status","onOnSuccess"])]),_:1}),e(p,{prop:"address",label:"\u5730\u5740","min-width":"260"}),e(p,{prop:"date",label:"\u65E5\u671F","min-width":"180",align:"center"}),e(p,{prop:"address",label:"\u64CD\u4F5C",align:"center","min-width":"140",fixed:"right"},{default:r(({row:t,$index:f})=>[e(b,{disabled:t.disabled,type:"warning",size:"small",icon:"el-icon-edit",circle:"",onClick:E=>c.$router.push({name:"TableEdit",params:{id:t.id}})},null,8,["disabled","onClick"]),e(b,{loading:t.disabled,type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:E=>S(t,f)},null,8,["loading","onClick"])]),_:1})]),_:1},8,["data"]),[[B,o(n).loading]]),e(j,null,{default:r(()=>[e(V,{pageSize:o(n).pageSize,"onUpdate:pageSize":l[2]||(l[2]=t=>o(n).pageSize=t),currentPage:o(n).currentPage,"onUpdate:currentPage":l[3]||(l[3]=t=>o(n).currentPage=t),total:o(n).total,onOnChange:m},null,8,["pageSize","currentPage","total"])]),_:1})]),_:1})])}}};export{le as default};
