var J=Object.defineProperty,L=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var y=(s,t,o)=>t in s?J(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,V=(s,t)=>{for(var o in t||(t={}))P.call(t,o)&&y(s,o,t[o]);if(h)for(var o of h(t))Q.call(t,o)&&y(s,o,t[o]);return s},x=(s,t)=>L(s,M(t));import{m as z,f as G,C,q as K,r as m,P as O,o as S,h as W,a,u as l,J as v,w as r,y as w,U as k,Q as T}from"./vendor.f6a7b20b.js";import{u as X}from"./useFormValid.218cf5b6.js";import{f as Y}from"./useForInData.6b9358e5.js";import{i as Z,a as $,e as ee}from"./list.2e0346cb.js";import"./index.257b4271.js";const te=w("\u786E\u8BA4\u63D0\u4EA4"),ae=w("\u53D6\u6D88"),re={setup(s){const t=z(),o=G(),e=C({loading:!1,pageTitle:{add:"\u65B0\u589E\u5458\u5DE5",edit:"\u4FEE\u6539\u5458\u5DE5"},type:"add",id:null}),g=K(),{validForm:j}=X(g),n=C({name:"",phone:"",address:"",status:!1}),c=()=>o.push({name:"Table"});function D(){const{params:u,name:i}=t;if(i==="TableAdd")return e.type="add";e.type="edit",e.id=u.id,U()}function U(){e.loading=!0,Z({id:e.id}).then(u=>Y(u.data,n)).finally(()=>e.loading=!1)}const q=()=>{j().then(()=>e.type==="add"?F():R()).catch(()=>{})};function F(){e.loading=!0,$(n).then(u=>{k({title:"\u63D0\u793A",message:u.message,type:"success"}),e.dialogVisible=!1,setTimeout(()=>{T.confirm("\u662F\u5426\u8981\u9000\u51FA\u65B0\u589E\u9875\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>c()).catch(()=>{})},800)}).finally(()=>{e.loading=!1})}function R(){e.loading=!0,ee(x(V({},n),{id:e.id})).then(u=>{k({title:"\u63D0\u793A",message:u.message,type:"success"}),e.dialogVisible=!1,setTimeout(()=>{T.confirm("\u662F\u5426\u8981\u9000\u51FA\u4FEE\u6539\u9875\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>c()).catch(()=>{})},800)}).finally(()=>{e.loading=!1})}return D(),(u,i)=>{const B=m("page-header"),f=m("el-input"),p=m("el-form-item"),E=m("el-switch"),I=m("el-form"),_=m("el-button"),N=m("fixed-action-bar"),H=m("page-main"),b=O("loading");return S(),W("div",null,[a(B,{title:l(e).pageTitle[l(e).type],onClick:c},null,8,["title"]),v(a(H,{style:{margin:"20px"}},{default:r(()=>[v(a(I,{ref:(d,A)=>{A.formRef=d,g.value=d},model:l(n),style:{margin:"0 auto",width:" 60%"},"label-width":"80px"},{default:r(()=>[a(p,{label:"\u59D3\u540D",prop:"name",rules:{required:!0,message:"\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:r(()=>[a(f,{modelValue:l(n).name,"onUpdate:modelValue":i[0]||(i[0]=d=>l(n).name=d),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u624B\u673A\u53F7",prop:"phone",rules:{required:!0,message:"\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:r(()=>[a(f,{modelValue:l(n).phone,"onUpdate:modelValue":i[1]||(i[1]=d=>l(n).phone=d),clearable:"",t:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u4F4F\u5740",prop:"address",rules:{required:!0,message:"\u4F4F\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:r(()=>[a(f,{modelValue:l(n).address,"onUpdate:modelValue":i[2]||(i[2]=d=>l(n).address=d),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4F4F\u5740"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u662F\u5426\u542F\u7528"},{default:r(()=>[a(E,{modelValue:l(n).status,"onUpdate:modelValue":i[3]||(i[3]=d=>l(n).status=d)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),[[b,l(e).infoLoading]]),a(N,{style:{"text-align":"center"}},{default:r(()=>[a(_,{type:"primary",onClick:q},{default:r(()=>[te]),_:1}),a(_,{onClick:c},{default:r(()=>[ae]),_:1})]),_:1})]),_:1},512),[[b,l(e).loading]])])}}};export{re as default};
