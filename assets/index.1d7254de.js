var M=Object.defineProperty,S=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var V=(s,t,l)=>t in s?M(s,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[t]=l,C=(s,t)=>{for(var l in t||(t={}))Z.call(t,l)&&V(s,l,t[l]);if(y)for(var l of y(t))j.call(t,l)&&V(s,l,t[l]);return s},x=(s,t)=>S(s,X(t));import{y as z,g as J,G as k,q as K,r as u,S as O,o as g,i as P,a as n,u as a,N as w,c as v,w as d,C as B,Z as T,X as q}from"./vendor.f5dbf0ba.js";import{u as Q}from"./useFormValid.218cf5b6.js";import{f as W}from"./useForInData.6b9358e5.js";import{i as Y,a as $,e as ee}from"./list.a9f54128.js";import"./index.64cc3ba1.js";const te=B("\u786E\u8BA4\u63D0\u4EA4"),ae=B("\u53D6\u6D88"),re={setup(s){const t=z(),l=J(),e=k({loading:!1,pageTitle:{add:"\u65B0\u589E\u5458\u5DE5",edit:"\u4FEE\u6539\u5458\u5DE5"},type:"add",id:null}),_=K(),{validForm:D}=Q(_),o=k({name:"",phone:"",address:"",status:!1}),c=()=>l.push({name:"Table"});function N(){const{params:r,name:i}=t;if(i==="TableAdd")return e.type="add";e.type="edit",e.id=r.id,R()}function R(){e.loading=!0,Y({id:e.id}).then(r=>W(r.data,o)).finally(()=>e.loading=!1)}const U=()=>{D().then(()=>e.type==="add"?E():F()).catch(()=>{})};function E(){e.loading=!0,$(o).then(r=>{T({title:"\u63D0\u793A",message:r.message,type:"success"}),e.dialogVisible=!1,setTimeout(()=>{q.confirm("\u662F\u5426\u8981\u9000\u51FA\u65B0\u589E\u9875\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>c()).catch(()=>{})},800)}).finally(()=>{e.loading=!1})}function F(){e.loading=!0,ee(x(C({},o),{id:e.id})).then(r=>{T({title:"\u63D0\u793A",message:r.message,type:"success"}),e.dialogVisible=!1,setTimeout(()=>{q.confirm("\u662F\u5426\u8981\u9000\u51FA\u4FEE\u6539\u9875\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>c()).catch(()=>{})},800)}).finally(()=>{e.loading=!1})}return N(),(r,i)=>{const H=u("page-header"),f=u("el-input"),p=u("el-form-item"),I=u("el-switch"),A=u("el-form"),h=u("el-button"),G=u("fixed-action-bar"),L=u("page-main"),b=O("loading");return g(),P("div",null,[n(H,{title:a(e).pageTitle[a(e).type],onClick:c},null,8,["title"]),w((g(),v(L,{style:{margin:"20px"}},{default:d(()=>[w((g(),v(A,{ref_key:"formRef",ref:_,model:a(o),style:{margin:"0 auto",width:" 60%"},"label-width":"80px"},{default:d(()=>[n(p,{label:"\u59D3\u540D",prop:"name",rules:{required:!0,message:"\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:d(()=>[n(f,{modelValue:a(o).name,"onUpdate:modelValue":i[0]||(i[0]=m=>a(o).name=m),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),n(p,{label:"\u624B\u673A\u53F7",prop:"phone",rules:{required:!0,message:"\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:d(()=>[n(f,{modelValue:a(o).phone,"onUpdate:modelValue":i[1]||(i[1]=m=>a(o).phone=m),clearable:"",t:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),n(p,{label:"\u4F4F\u5740",prop:"address",rules:{required:!0,message:"\u4F4F\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:d(()=>[n(f,{modelValue:a(o).address,"onUpdate:modelValue":i[2]||(i[2]=m=>a(o).address=m),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4F4F\u5740"},null,8,["modelValue"])]),_:1}),n(p,{label:"\u662F\u5426\u542F\u7528"},{default:d(()=>[n(I,{modelValue:a(o).status,"onUpdate:modelValue":i[3]||(i[3]=m=>a(o).status=m)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[b,a(e).infoLoading]]),n(G,{style:{"text-align":"center"}},{default:d(()=>[n(h,{type:"primary",onClick:U},{default:d(()=>[te]),_:1}),n(h,{onClick:c},{default:d(()=>[ae]),_:1})]),_:1})]),_:1})),[[b,a(e).loading]])])}}};export{re as default};
