import{l as w}from"./index.56dcb9aa.js";import{f as z}from"./useForInData.6b9358e5.js";import{Z as I,g as N,G as S,r as o,S as B,o as h,c as x,w as i,a as t,u as n,aH as L,N as P,H as V,I as D,C as H,m as O}from"./vendor.f5dbf0ba.js";import{_ as U}from"./index.64cc3ba1.js";function j({list:s,del:g},e,m,p=["list"]){function d(){e.loading=!0,s(m).then(a=>{console.log(a);const{paginate:c,list:r}=a.data;if(!r&&!c)return e.list=a.data;e.list=r,z(c,e,p)}).finally(()=>e.loading=!1)}async function l({row:a,index:c}){try{a.disabled=!0;const r=await g({id:a.id});e.list.splice(c,1),e.total-=1,I({title:"\u63D0\u793A",message:r.message,type:"success"})}finally{a.disabled=!1}}return{getListData:d,onDelChange:l}}const A=s=>(V("data-v-1cec0cc3"),s=s(),D(),s),E=A(()=>O("span",{style:{"font-size":"16px"}},"\u901A\u77E5\u516C\u544A\u5217\u8868",-1)),G=H(" \u65B0 \u589E "),R={setup(s){const g=N(),e=S({page_size:10,total:0,current_page:1,loading:!1,list:[]}),m=d=>g.push({name:"NoticeInfo",params:{id:d.id}}),{getListData:p}=j({list:w},e);return p(),(d,l)=>{const a=o("el-button"),c=o("router-link"),r=o("refresh-button"),f=o("el-row"),u=o("el-table-column"),C=o("el-table"),b=o("pagination"),y=o("fixed-action-bar"),v=o("page-main"),k=B("loading");return h(),x(v,{style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{header:i(()=>[t(f,{justify:"space-between",align:"middle"},{default:i(()=>[E,t(f,{align:"middle"},{default:i(()=>[t(c,{custom:"",to:{name:"NoticeAdd"}},{default:i(({navigate:_})=>[t(a,{size:"small",icon:n(L),type:"primary",onClick:_},{default:i(()=>[G]),_:2},1032,["icon","onClick"])]),_:1}),t(r,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:n(p)},null,8,["onClick"])]),_:1})]),_:1})]),default:i(()=>[P((h(),x(C,{data:n(e).list,onCurrentChange:m},{default:i(()=>[t(u,{type:"index",label:"\u5E8F\u53F7",align:"center"}),t(u,{prop:"title",label:"\u516C\u544A\u6807\u9898"}),t(u,{prop:"name",label:"\u53D1\u5E03\u4EBA",width:"80",align:"center"}),t(u,{prop:"date",label:"\u53D1\u5E03\u65F6\u95F4",width:"180",align:"center"})]),_:1},8,["data"])),[[k,n(e).loading]]),t(y,null,{default:i(()=>[t(b,{pageSize:n(e).page_size,"onUpdate:pageSize":l[0]||(l[0]=_=>n(e).page_size=_),currentPage:n(e).current_page,"onUpdate:currentPage":l[1]||(l[1]=_=>n(e).current_page=_),total:n(e).total,onOnChange:n(p)},null,8,["pageSize","currentPage","total","onOnChange"])]),_:1})]),_:1})}}};var J=U(R,[["__scopeId","data-v-1cec0cc3"]]);export{J as default};
