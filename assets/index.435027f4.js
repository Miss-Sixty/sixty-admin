import{l as y}from"./index.2abbff8b.js";import{f as k}from"./useForInData.6b9358e5.js";import{V as w,g as z,D as I,r as o,Q as N,o as S,c as j,w as s,a as t,u as n,aC as B,K as D,E as P,G as V,B as L,m as E}from"./vendor.1e4d5cc4.js";import{_ as O}from"./index.58d2bb44.js";function U({list:i,del:g},e,f,d=["list"]){function _(){e.loading=!0,i(f).then(a=>{console.log(a);const{paginate:c,list:r}=a.data;if(!r&&!c)return e.list=a.data;e.list=r,k(c,e,d)}).finally(()=>e.loading=!1)}async function l({row:a,index:c}){try{a.disabled=!0;const r=await g({id:a.id});e.list.splice(c,1),e.total-=1,w({title:"\u63D0\u793A",message:r.message,type:"success"})}finally{a.disabled=!1}}return{getListData:_,onDelChange:l}}const A=i=>(P("data-v-67dcac6c"),i=i(),V(),i),F=A(()=>E("span",{style:{"font-size":"16px"}},"\u901A\u77E5\u516C\u544A\u5217\u8868",-1)),G=L(" \u65B0 \u589E "),K={setup(i){const g=z(),e=I({page_size:10,total:0,current_page:1,loading:!1,list:[]}),f=_=>g.push({name:"NoticeInfo",params:{id:_.id}}),{getListData:d}=U({list:y},e);return d(),(_,l)=>{const a=o("el-button"),c=o("router-link"),r=o("refresh-button"),m=o("el-row"),u=o("el-table-column"),b=o("el-table"),h=o("pagination"),x=o("fixed-action-bar"),C=o("page-main"),v=N("loading");return S(),j(C,{style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{header:s(()=>[t(m,{justify:"space-between",align:"middle"},{default:s(()=>[F,t(m,{align:"middle"},{default:s(()=>[t(c,{custom:"",to:{name:"NoticeAdd"}},{default:s(({navigate:p})=>[t(a,{size:"small",icon:n(B),type:"primary",onClick:p},{default:s(()=>[G]),_:2},1032,["icon","onClick"])]),_:1}),t(r,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:n(d)},null,8,["onClick"])]),_:1})]),_:1})]),default:s(()=>[D(t(b,{data:n(e).list,onCurrentChange:f},{default:s(()=>[t(u,{type:"index",label:"\u5E8F\u53F7",align:"center"}),t(u,{prop:"title",label:"\u516C\u544A\u6807\u9898"}),t(u,{prop:"name",label:"\u53D1\u5E03\u4EBA",width:"80",align:"center"}),t(u,{prop:"date",label:"\u53D1\u5E03\u65F6\u95F4",width:"180",align:"center"})]),_:1},8,["data"]),[[v,n(e).loading]]),t(x,null,{default:s(()=>[t(h,{pageSize:n(e).page_size,"onUpdate:pageSize":l[0]||(l[0]=p=>n(e).page_size=p),currentPage:n(e).current_page,"onUpdate:currentPage":l[1]||(l[1]=p=>n(e).current_page=p),total:n(e).total,onOnChange:n(d)},null,8,["pageSize","currentPage","total","onOnChange"])]),_:1})]),_:1})}}};var H=O(K,[["__scopeId","data-v-67dcac6c"]]);export{H as default};
