var E=Object.defineProperty;var f=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var b=(r,n,e)=>n in r?E(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,h=(r,n)=>{for(var e in n||(n={}))T.call(n,e)&&b(r,e,n[e]);if(f)for(var e of f(n))U.call(n,e)&&b(r,e,n[e]);return r};import{s as N,d as A,l as K}from"./list.7c9764db.js";import{s as L}from"./useSearch.3b9cc75a.js";import{D as M,aT as Q,r as o,Q as j,o as y,i as q,a,w as i,u as l,K as F,c as G,B as H,R as I,V as J}from"./vendor.a8f4b3ca.js";import"./index.de995f9b.js";import"./useForInData.6b9358e5.js";const W=H(" \u65B0 \u589E "),ne={setup(r){const n=M({keywords:null,status:null}),e=Q({pageSize:10,total:0,currentPage:1,loading:!0,list:[]}),{onSearchChange:k,onResetChange:w}=L(e.currentPage,u,n);async function x(c,s){try{await I.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417\uFF1F","\u63D0\u793A",{type:"warning"}),c.disabled=!0;const d=await A({id:c.id});e.list.splice(s,1),e.total-=1,J({title:"\u63D0\u793A",message:d.message,type:"success"})}finally{c.disabled=!1}}function u(){e.loading=!0,K(h({currentPage:e.currentPage},n)).then(c=>{const{total:s,current_page:d,list:m}=c.data;e.total=s,e.currentPage=d,e.list=m}).finally(()=>e.loading=!1)}return u(),(c,s)=>{const d=o("el-option"),m=o("el-select"),C=o("search-bar"),_=o("el-button"),v=o("router-link"),S=o("refresh-button"),P=o("el-row"),p=o("el-table-column"),z=o("confirm-switch"),O=o("el-table"),V=o("pagination"),B=o("fixed-action-bar"),D=o("page-main"),R=j("loading");return y(),q("div",null,[a(C,{keywords:l(n).keywords,"onUpdate:keywords":s[1]||(s[1]=t=>l(n).keywords=t),"keywords-text":"\u641C\u7D22\u5458\u5DE5\u59D3\u540D",onOnSearch:l(k),onOnReset:l(w)},{default:i(()=>[a(m,{modelValue:l(n).status,"onUpdate:modelValue":s[0]||(s[0]=t=>l(n).status=t),clearable:"",placeholder:"\u7B5B\u9009 \u7981\u7528/\u542F\u7528"},{default:i(()=>[a(d,{label:"\u7981\u7528",value:0}),a(d,{label:"\u542F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1},8,["keywords","onOnSearch","onOnReset"]),a(D,{title:"\u8868\u683C",style:{margin:"20px"},"header-border":!1,padding:"0 20px 20px"},{extra:i(()=>[a(P,{align:"middle"},{default:i(()=>[a(v,{custom:"",to:{name:"TableAdd"}},{default:i(({navigate:t})=>[a(_,{size:"small",icon:"el-icon-plus",type:"primary",onClick:t,style:{"margin-right":"16px"}},{default:i(()=>[W]),_:2},1032,["onClick"])]),_:1}),a(S,{content:"\u5237\u65B0\u8868\u683C\u6570\u636E",onClick:u})]),_:1})]),default:i(()=>[F((y(),G(O,{data:l(e).list},{default:i(()=>[a(p,{type:"index",width:"50"}),a(p,{prop:"name",label:"\u59D3\u540D","min-width":"160",align:"center"}),a(p,{prop:"address",label:"\u7981\u7528/\u542F\u7528","min-width":"160",align:"center"},{default:i(({row:t})=>[a(z,{id:t.id,api:l(N),text:`\u786E\u5B9A\u8981\u300C${t.status?"\u7981\u7528":"\u542F\u7528"}\u300D\u8BE5\u6570\u636E\u5417\uFF1F`,status:t.status,onOnSuccess:g=>t.status=!t.status},null,8,["id","api","text","status","onOnSuccess"])]),_:1}),a(p,{prop:"address",label:"\u5730\u5740","min-width":"260"}),a(p,{prop:"date",label:"\u65E5\u671F","min-width":"180",align:"center"}),a(p,{prop:"address",label:"\u64CD\u4F5C",align:"center","min-width":"140",fixed:"right"},{default:i(({row:t,$index:g})=>[a(_,{disabled:t.disabled,type:"warning",size:"small",icon:"el-icon-edit",circle:"",onClick:$=>c.$router.push({name:"TableEdit",params:{id:t.id}})},null,8,["disabled","onClick"]),a(_,{loading:t.disabled,type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:$=>x(t,g)},null,8,["loading","onClick"])]),_:1})]),_:1},8,["data"])),[[R,l(e).loading]]),a(B,null,{default:i(()=>[a(V,{pageSize:l(e).pageSize,"onUpdate:pageSize":s[2]||(s[2]=t=>l(e).pageSize=t),currentPage:l(e).currentPage,"onUpdate:currentPage":s[3]||(s[3]=t=>l(e).currentPage=t),total:l(e).total,onOnChange:u},null,8,["pageSize","currentPage","total"])]),_:1})]),_:1})])}}};export{ne as default};
