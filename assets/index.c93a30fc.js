var L=Object.defineProperty,M=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(s,a,o)=>a in s?L(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o,V=(s,a)=>{for(var o in a||(a={}))P.call(a,o)&&y(s,o,a[o]);if(b)for(var o of b(a))z.call(a,o)&&y(s,o,a[o]);return s},x=(s,a)=>M(s,O(a));import{m as G,f as J,B as C,q as K,r as m,O as Q,o as S,h as W,a as t,u as l,I as v,w as r,y as w,R as k,P as T}from"./vendor.2dac7fd2.js";import{u as X}from"./useFormValid.218cf5b6.js";import{f as Y}from"./useForInData.6b9358e5.js";import{i as Z,a as $,e as ee}from"./list.d324b3b2.js";import"./index.50d4a1ac.js";const ae=w("\u786E\u8BA4\u63D0\u4EA4"),te=w("\u53D6\u6D88"),re={setup(s){const a=G(),o=J(),e=C({loading:!1,pageTitle:{add:"\u65B0\u589E\u5458\u5DE5",edit:"\u4FEE\u6539\u5458\u5DE5"},type:"add",id:null}),g=K(),{validForm:j}=X(g),n=C({name:"",phone:"",address:"",status:!1}),c=()=>o.push({name:"Table"});function D(){const{params:u,name:i}=a;if(i==="TableAdd")return e.type="add";e.type="edit",e.id=u.id,R()}function R(){e.loading=!0,Z({id:e.id}).then(u=>Y(u.data,n)).finally(()=>e.loading=!1)}const q=()=>{j().then(()=>e.type==="add"?B():F()).catch(()=>{})};function B(){e.loading=!0,$(n).then(u=>{k({title:"\u63D0\u793A",message:u.message,type:"success"}),e.dialogVisible=!1,setTimeout(()=>{T.confirm("\u662F\u5426\u8981\u9000\u51FA\u65B0\u589E\u9875\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>c()).catch(()=>{})},800)}).finally(()=>{e.loading=!1})}function F(){e.loading=!0,ee(x(V({},n),{id:e.id})).then(u=>{k({title:"\u63D0\u793A",message:u.message,type:"success"}),e.dialogVisible=!1,setTimeout(()=>{T.confirm("\u662F\u5426\u8981\u9000\u51FA\u4FEE\u6539\u9875\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>c()).catch(()=>{})},800)}).finally(()=>{e.loading=!1})}return D(),(u,i)=>{const I=m("page-header"),f=m("el-input"),p=m("el-form-item"),U=m("el-switch"),E=m("el-form"),_=m("el-button"),N=m("fixed-action-bar"),H=m("page-main"),h=Q("loading");return S(),W("div",null,[t(I,{title:l(e).pageTitle[l(e).type],onClick:c},null,8,["title"]),v(t(H,{style:{margin:"20px"}},{default:r(()=>[v(t(E,{ref:(d,A)=>{A.formRef=d,g.value=d},model:l(n),style:{margin:"0 auto",width:" 60%"},"label-width":"80px"},{default:r(()=>[t(p,{label:"\u59D3\u540D",prop:"name",rules:{required:!0,message:"\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:r(()=>[t(f,{modelValue:l(n).name,"onUpdate:modelValue":i[0]||(i[0]=d=>l(n).name=d),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u624B\u673A\u53F7",prop:"phone",rules:{required:!0,message:"\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:r(()=>[t(f,{modelValue:l(n).phone,"onUpdate:modelValue":i[1]||(i[1]=d=>l(n).phone=d),clearable:"",t:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u4F4F\u5740",prop:"address",rules:{required:!0,message:"\u4F4F\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:r(()=>[t(f,{modelValue:l(n).address,"onUpdate:modelValue":i[2]||(i[2]=d=>l(n).address=d),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4F4F\u5740"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u662F\u5426\u542F\u7528"},{default:r(()=>[t(U,{modelValue:l(n).status,"onUpdate:modelValue":i[3]||(i[3]=d=>l(n).status=d)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),[[h,l(e).infoLoading]]),t(N,{style:{"text-align":"center"}},{default:r(()=>[t(_,{type:"primary",onClick:q},{default:r(()=>[ae]),_:1}),t(_,{onClick:c},{default:r(()=>[te]),_:1})]),_:1})]),_:1},512),[[h,l(e).loading]])])}}};export{re as default};
